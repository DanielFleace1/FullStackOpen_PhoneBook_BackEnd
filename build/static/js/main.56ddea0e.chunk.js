(this.webpackJsonppart2_phonebook=this.webpackJsonppart2_phonebook||[]).push([[0],{11:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var c=t(20),a=t.n(c),r=t(21),o=t(10),i=t(3),s=t(1),u=t(0),l=function(e){var n=e.handleFilterChange;return Object(u.jsxs)("div",{children:["Search for names:",Object(u.jsx)("input",{onChange:n})]})},d=function(e){var n=e.persons,t=e.newFilter,c=e.handleDelete,a=n.findIndex((function(e){return e.name===t}));return 0===t.length?Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Numbers"}),n.map((function(e,n){return Object(u.jsxs)("li",{children:[" ",e.name,": ",e.number," ",Object(u.jsx)("button",{onClick:function(){c(e.id,e.name)},children:" delete"})]},n)}))]}):a>-1?Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Filtered names"}),n[a].name,": ",n[a].number,"  ",Object(u.jsx)("button",{onClick:function(){c(n[a].id,n[a].name)},children:" delete "}),Object(u.jsx)("p",{children:"(clear filter bar to see all existing phone numbers)"})]}):Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Filtered names"}),Object(u.jsx)("p",{children:" No filtered names exist"}),Object(u.jsx)("p",{children:"(clear filter bar to get all phone numbers)"})]})},j=function(e){var n=e.newName,t=e.newNum,c=e.handleNameChange,a=e.handleNumChange,r=e.addNewName;return Object(u.jsxs)("form",{onSubmit:r,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:c})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:t,onChange:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},b=(t(11),function(e){var n=e.message;return n?Object(u.jsx)("div",{className:"successMessage",children:n}):Object(u.jsx)("div",{})}),h=function(e){var n=e.errorMessage;return n?Object(u.jsx)("div",{className:"errorMessage",children:n}):Object(u.jsx)("div",{})},f=t(4),m=t.n(f),O="/api/persons",p={getAll:function(){return m.a.get(O)},create:function(e){return m.a.post(O,e)},update:function(e,n){return m.a.put("".concat(O,"/").concat(e),n)}},x=function(){var e=Object(s.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],a=Object(s.useState)(""),f=Object(i.a)(a,2),O=f[0],x=f[1],g=Object(s.useState)(""),v=Object(i.a)(g,2),w=v[0],N=v[1],k=Object(s.useState)(""),C=Object(i.a)(k,2),y=C[0],S=C[1],F=Object(s.useState)(null),T=Object(i.a)(F,2),A=T[0],M=T[1],D=Object(s.useState)(null),I=Object(i.a)(D,2),E=I[0],J=I[1];return Object(s.useEffect)((function(){p.getAll().then((function(e){c(e.data)}))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(b,{message:A}),Object(u.jsx)(h,{errorMessage:E}),Object(u.jsx)(l,{handleFilterChange:function(e){S(e.target.value)}}),Object(u.jsx)("h2",{children:"Add a new person"}),Object(u.jsx)(j,{newName:O,newNum:w,handleNameChange:function(e){x(e.target.value)},handleNumChange:function(e){N(e.target.value)},addNewName:function(e){e.preventDefault();var n=O.length,a=w.length;if(0===n||0===a)return alert("Please enter data for all the fields");var r={name:O,number:w},i=t.find((function(e){return e.name===O}));if(i){if(!window.confirm("".concat(O," is already added to the phonebook, would you like to replace the old number with a new one?")))return;var s=Object(o.a)(Object(o.a)({},i),{},{number:w});p.update(i.id,s).then((function(e){c(t.map((function(n){return n.id!==i.id?n:e.data}))),x(""),N(""),M("".concat(r.name,"'s number was changed to ").concat(r.number," in your phone book ")),setTimeout((function(){M(null)}),3e3)})).catch((function(e){console.log("There is an error:",e),J("".concat(r.name," has already been deleted from the server ")),setTimeout((function(){J(null)}),3e3),x(""),N(""),c(t.filter((function(e){return e.id!==i.id})))}))}else p.create(r).then((function(e){c(t.concat(e.data)),x(""),N(""),M("".concat(r.name," was added to your phone book")),setTimeout((function(){M(null)}),3e3)})).catch((function(e){J(e.response.data.error),setTimeout((function(){J(null)}),3e3),x(""),N("")}))}}),Object(u.jsx)(d,{persons:t,newFilter:y,handleDelete:function(e,n){if(window.confirm("Are you sure you want to delete ".concat(n," from your phonebook?"))){m.a.delete("".concat("/api/persons","/").concat(e));var a=Object(r.a)(t),o=t.findIndex((function(n){return n.id===e}));console.log(a),a.splice(o,1),console.log(a),c(a)}}})]})};a.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.56ddea0e.chunk.js.map